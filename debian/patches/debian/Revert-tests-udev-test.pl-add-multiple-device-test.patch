From: Michael Biebl <biebl@debian.org>
Date: Mon, 27 Sep 2021 02:38:29 +0200
Subject: Revert "tests/udev-test.pl: add multiple device test"

This reverts commit 4a0ec82daf32446519e1d86329bb802325b82104.
---
 test/udev-test.pl | 179 ------------------------------------------------------
 1 file changed, 179 deletions(-)

diff --git a/test/udev-test.pl b/test/udev-test.pl
index 5b1e335..22c338c 100755
--- a/test/udev-test.pl
+++ b/test/udev-test.pl
@@ -2139,185 +2139,6 @@ TAGS=="foo", SYMLINK+="found"
 TAGS=="aaa", SYMLINK+="bad"
 EOF
         },
-        {
-                desc            => "multiple devices",
-                devices => [
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda1",
-                                exp_links       => ["part-1"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda5",
-                                exp_links       => ["part-5"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda6",
-                                exp_links       => ["part-6"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda7",
-                                exp_links       => ["part-7"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda8",
-                                exp_links       => ["part-8"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda9",
-                                exp_links       => ["part-9"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda10",
-                                exp_links       => ["part-10"],
-                        },
-                    ],
-                rules          => <<EOF
-SUBSYSTEM=="block", SUBSYSTEMS=="scsi", KERNEL=="sda?*", ENV{DEVTYPE}=="partition", SYMLINK+="part-%n"
-EOF
-        },
-        {
-                desc            => "multiple devices, same link name, positive prio",
-                repeat          => 100,
-                devices => [
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda1",
-                                exp_links       => ["part-1"],
-                                not_exp_links   => ["partition"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda5",
-                                exp_links       => ["part-5"],
-                                not_exp_links   => ["partition"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda6",
-                                not_exp_links   => ["partition"],
-                                exp_links       => ["part-6"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda7",
-                                exp_links       => ["part-7", "partition"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda8",
-                                not_exp_links   => ["partition"],
-                                exp_links       => ["part-8"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda9",
-                                not_exp_links   => ["partition"],
-                                exp_links       => ["part-9"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda10",
-                                not_exp_links   => ["partition"],
-                                exp_links       => ["part-10"],
-                        },
-                    ],
-                rules          => <<EOF
-SUBSYSTEM=="block", SUBSYSTEMS=="scsi", KERNEL=="sda?*", ENV{DEVTYPE}=="partition", SYMLINK+="part-%n"
-SUBSYSTEM=="block", SUBSYSTEMS=="scsi", KERNEL=="sda?*", ENV{DEVTYPE}=="partition", SYMLINK+="partition"
-KERNEL=="*7", OPTIONS+="link_priority=10"
-EOF
-        },
-        {
-                desc            => "multiple devices, same link name, negative prio",
-                devices => [
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda1",
-                                exp_links       => ["part-1"],
-                                not_exp_links   => ["partition"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda5",
-                                exp_links       => ["part-5"],
-                                not_exp_links   => ["partition"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda6",
-                                not_exp_links   => ["partition"],
-                                exp_links       => ["part-6"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda7",
-                                exp_links       => ["part-7", "partition"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda8",
-                                not_exp_links   => ["partition"],
-                                exp_links       => ["part-8"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda9",
-                                not_exp_links   => ["partition"],
-                                exp_links       => ["part-9"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda10",
-                                not_exp_links   => ["partition"],
-                                exp_links       => ["part-10"],
-                        },
-                    ],
-                rules          => <<EOF
-SUBSYSTEM=="block", SUBSYSTEMS=="scsi", KERNEL=="sda?*", ENV{DEVTYPE}=="partition", SYMLINK+="part-%n"
-SUBSYSTEM=="block", SUBSYSTEMS=="scsi", KERNEL=="sda?*", ENV{DEVTYPE}=="partition", SYMLINK+="partition"
-KERNEL!="*7", OPTIONS+="link_priority=-10"
-EOF
-        },
-        {
-                desc            => "multiple devices, same link name, positive prio, sleep",
-                devices => [
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda1",
-                                exp_links       => ["part-1"],
-                                not_exp_links   => ["partition"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda5",
-                                exp_links       => ["part-5"],
-                                not_exp_links   => ["partition"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda6",
-                                not_exp_links   => ["partition"],
-                                exp_links       => ["part-6"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda7",
-                                exp_links       => ["part-7", "partition"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda8",
-                                not_exp_links   => ["partition"],
-                                exp_links       => ["part-8"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda9",
-                                not_exp_links   => ["partition"],
-                                exp_links       => ["part-9"],
-                        },
-                        {
-                                devpath         => "/devices/pci0000:00/0000:00:1f.2/host0/target0:0:0/0:0:0:0/block/sda/sda10",
-                                not_exp_links   => ["partition"],
-                                exp_links       => ["part-10"],
-                        },
-                    ],
-                sleep_us       => 10000,
-                rules          => <<EOF
-SUBSYSTEM=="block", SUBSYSTEMS=="scsi", KERNEL=="sda?*", ENV{DEVTYPE}=="partition", SYMLINK+="part-%n"
-SUBSYSTEM=="block", SUBSYSTEMS=="scsi", KERNEL=="sda?*", ENV{DEVTYPE}=="partition", SYMLINK+="partition"
-KERNEL=="*7", OPTIONS+="link_priority=10"
-EOF
-        },
-        {
-                desc           => 'all_block_devs',
-                generator      => expect_for_some("\\/sda6\$", ["blockdev"]),
-                repeat         => 10,
-                rules          => <<EOF
-SUBSYSTEM=="block", SUBSYSTEMS=="scsi", KERNEL=="sd*", SYMLINK+="blockdev"
-KERNEL=="sda6", OPTIONS+="link_priority=10"
-EOF
-        }
 );
 
 sub create_rules {
